import{P as i,r,C as L,W as q,j as c,_ as o}from"./index-DdubsRfB.js";import{E as w,P as F}from"./ProductItem-DyVUKgH3.js";import{B as N}from"./BeatLoader-DoOWqFl8.js";function O({data:u,isError:g,error:x,isLoading:P}){const{addProductToCart:W,setNumOfCartItems:C}=r.useContext(L),{wishlistIds:n,setWishlistIds:m,addToWishlist:b,removeFromWishlist:j,getWishlist:f}=r.useContext(q),[y,l]=r.useState(!1),[E,I]=r.useState();r.useEffect(()=>{var a;f&&((a=f())==null||a.then(t=>{var s,e;((s=t==null?void 0:t.data)==null?void 0:s.status)==="success"&&m((e=t==null?void 0:t.data)==null?void 0:e.data.map(d=>d.id))}))},[]);const T=async a=>{l(!0),I(a);const t=await W(a);t.data.status==="success"?(l(!1),C(t.data.numOfCartItems),o.success(t.data.message,{duration:5e3,position:"bottom-center"})):(l(!1),o.error(t.data.message,{duration:2e3,position:"bottom-center"}))},R=async a=>{var s,e;const t=await b(a);((s=t==null?void 0:t.data)==null?void 0:s.status)==="success"?(o.success(t.data.message,{duration:5e3,position:"bottom-center"}),m((e=t==null?void 0:t.data)==null?void 0:e.data)):o.error(t.data.message,{duration:2e3,position:"bottom-center"})},v=async a=>{var s,e,d,h;const t=await j(a);((s=t==null?void 0:t.data)==null?void 0:s.status)==="success"?(o.success((e=t==null?void 0:t.data)==null?void 0:e.message,{duration:5e3,position:"bottom-center"}),m((d=t==null?void 0:t.data)==null?void 0:d.data)):o.error((h=t==null?void 0:t.data)==null?void 0:h.message,{duration:2e3,position:"bottom-center"})};return P?c.jsx(N,{className:"text-center",color:"rgb(22 163 74)"}):g?c.jsx(w,{error:x.message}):c.jsx("div",{className:"flex flex-wrap",children:u==null?void 0:u.map(a=>c.jsx(F,{product:a,addProduct:T,loading:y,currentProductId:E,addProductToWishlist:R,removeProductFromWishlist:v,isInWishlist:n==null?void 0:n.includes(a.id)},a.id))})}O.propTypes={data:i.arrayOf(i.shape({id:i.string.isRequired})),isError:i.bool.isRequired,error:i.shape({message:i.string}),isLoading:i.bool.isRequired};export{O as P};
